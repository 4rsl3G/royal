<section class="hero-wrap p-5 md:p-8">
  <div class="blob one"></div>
  <div class="blob two"></div>

  <div class="relative grid lg:grid-cols-2 gap-7 items-center">
    <!-- LEFT -->
    <div>
      <div class="chip" data-aos="fade-up">
        <i class="ri-shield-check-line"></i>
        Aman • Cepat • Resmi • Realtime
      </div>

      <h1 class="mt-4 text-3xl md:text-6xl font-black leading-[1.05] tracking-tight" data-aos="fade-up" data-aos-delay="70">
        Topup Chip
        <span class="block"><%= settings.site_name %></span>
      </h1>

      <p class="mt-4 text-slate-600 text-base md:text-lg leading-relaxed" data-aos="fade-up" data-aos-delay="140">
        <b class="text-slate-900"><%= settings.brand_tagline %></b>
        <span class="block mt-2">
          Bayar via <b class="text-slate-900">Midtrans Snap</b> (VA/QRIS/E-Wallet/CC), pantau status <b class="text-slate-900">realtime</b>,
          dan dapat notifikasi <b class="text-slate-900">WhatsApp</b> otomatis (opsional).
        </span>
      </p>

      <div class="mt-6 flex flex-wrap gap-3" data-aos="fade-up" data-aos-delay="210">
        <a href="/#/checkout" class="btn-primary shimmer">
          <i class="ri-flashlight-line"></i> Topup Sekarang
        </a>
        <a href="/#/products" class="btn-ghost">
          <i class="ri-store-2-line"></i> Lihat Produk
        </a>
        <a href="/#/order/last" class="btn-ghost" id="btnTrack">
          <i class="ri-search-2-line"></i> Lacak Order
        </a>
      </div>

      <!-- quick stats -->
      <div class="mt-6 grid grid-cols-2 md:grid-cols-4 gap-3" data-aos="fade-up" data-aos-delay="280">
        <div class="glass rounded-2xl p-4">
          <div class="text-xs text-slate-500 font-semibold">Metode bayar</div>
          <div class="mt-1 font-black text-lg flex items-center gap-2">
            <i class="ri-bank-card-line"></i> Snap
          </div>
          <div class="text-sm text-slate-500">VA • QRIS • E-Wallet</div>
        </div>
        <div class="glass rounded-2xl p-4">
          <div class="text-xs text-slate-500 font-semibold">Status</div>
          <div class="mt-1 font-black text-lg flex items-center gap-2">
            <i class="ri-pulse-line"></i> Realtime
          </div>
          <div class="text-sm text-slate-500">Auto update order</div>
        </div>
        <div class="glass rounded-2xl p-4">
          <div class="text-xs text-slate-500 font-semibold">Keamanan</div>
          <div class="mt-1 font-black text-lg flex items-center gap-2">
            <i class="ri-lock-2-line"></i> Hardened
          </div>
          <div class="text-sm text-slate-500">CSP • CSRF • Rate limit</div>
        </div>
        <div class="glass rounded-2xl p-4">
          <div class="text-xs text-slate-500 font-semibold">Notifikasi</div>
          <div class="mt-1 font-black text-lg flex items-center gap-2">
            <i class="ri-whatsapp-line"></i> WhatsApp
          </div>
          <div class="text-sm text-slate-500">Template otomatis</div>
        </div>
      </div>

      <!-- trust chips -->
      <div class="mt-4 flex flex-wrap gap-2" data-aos="fade-up" data-aos-delay="340">
        <span class="chip"><i class="ri-lock-2-line"></i> CSP + CSRF</span>
        <span class="chip"><i class="ri-fire-line"></i> Rate Limit</span>
        <span class="chip"><i class="ri-database-2-line"></i> Session MySQL</span>
        <span class="chip"><i class="ri-shield-keyhole-line"></i> Input Sanitized</span>
      </div>

      <!-- social proof -->
      <div class="mt-6 glass rounded-2xl p-4" data-aos="zoom-in" data-aos-delay="420">
        <div class="flex items-start gap-3">
          <div class="badge"><i class="ri-star-smile-line"></i></div>
          <div class="min-w-0">
            <div class="font-black">Dipakai untuk topup cepat tanpa ribet</div>
            <div class="text-sm text-slate-500 mt-1">
              “Bayar → status realtime → langsung diproses. Enak banget buat yang nggak mau nunggu.”
            </div>
            <div class="text-xs text-slate-500 mt-2">— pelanggan Royal Dreams</div>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="relative">
      <div class="glass rounded-3xl p-5 md:p-6 floaty" data-aos="zoom-in" data-aos-delay="120">
        <div class="flex items-center justify-between gap-3">
          <div>
            <div class="text-xs text-slate-500 font-semibold">Recommended</div>
            <div class="font-black text-lg">Produk Populer</div>
          </div>
          <a href="/#/products" class="text-sm text-slate-600 hover:text-slate-900 font-bold">Lihat semua</a>
        </div>

        <div class="mt-4 grid gap-3">
          <% if (popular && popular.length) { %>
            <% popular.forEach((p, idx) => { %>
              <a href="/#/checkout" class="flex items-center gap-3 border rounded-2xl p-3 bg-white/70 hover:bg-white transition"
                 style="text-decoration:none;"
                 data-aos="fade-left" data-aos-delay="<%= 120 + idx*110 %>">
                <div class="w-12 h-12 rounded-2xl bg-slate-100 overflow-hidden flex items-center justify-center">
                  <% if (p.image) { %>
                    <img src="<%= p.image %>" class="w-full h-full object-cover" />
                  <% } else { %>
                    <i class="ri-gamepad-line text-slate-500 text-xl"></i>
                  <% } %>
                </div>
                <div class="flex-1 min-w-0">
                  <div class="font-black truncate"><%= p.name %></div>
                  <div class="text-xs text-slate-500 truncate"><%= p.sku %> • <%= p.game_name || 'Royal Dreams' %></div>
                  <div class="mt-1 text-xs text-slate-500">
                    <i class="ri-shield-check-line"></i> pembayaran resmi • <i class="ri-time-line"></i> realtime
                  </div>
                </div>
                <div class="text-right">
                  <div class="font-black">
                    Rp <%= (p.price_type==='fixed' ? p.price : p.price_per_item) %>
                  </div>
                  <div class="text-xs text-slate-500"><%= p.price_type==='fixed' ? 'Fixed' : '/item' %></div>
                </div>
              </a>
            <% }) %>
          <% } else { %>
            <div class="text-slate-500 text-sm">Belum ada produk.</div>
          <% } %>
        </div>

        <div class="mt-4 grid grid-cols-2 gap-2" data-aos="fade-up" data-aos-delay="260">
          <a href="/#/checkout" class="btn-primary shimmer justify-center">
            <i class="ri-shopping-cart-2-line"></i> Mulai Checkout
          </a>
          <a href="/#/products" class="btn-ghost justify-center">
            <i class="ri-store-2-line"></i> Browse
          </a>
        </div>

        <div class="mt-3 text-xs text-slate-500">
          Tip: Pastikan Game ID benar sebelum bayar. Jika salah, proses bisa tertunda.
        </div>
      </div>

      <!-- mini feature cards -->
      <div class="mt-4 grid grid-cols-2 gap-3" data-aos="fade-up" data-aos-delay="220">
        <div class="card">
          <div class="font-black flex items-center gap-2"><i class="ri-whatsapp-line"></i> Notifikasi WA</div>
          <div class="text-sm text-slate-500 mt-1">Otomatis saat bayar & selesai (opsional).</div>
        </div>
        <div class="card">
          <div class="font-black flex items-center gap-2"><i class="ri-admin-line"></i> Admin Panel</div>
          <div class="text-sm text-slate-500 mt-1">Monitoring order + update fulfill status.</div>
        </div>
      </div>

      <!-- security note -->
      <div class="mt-4 glass rounded-2xl p-4" data-aos="flip-up" data-aos-delay="320">
        <div class="flex items-start gap-3">
          <div class="badge"><i class="ri-shield-keyhole-line"></i></div>
          <div class="min-w-0">
            <div class="font-black">Security-first</div>
            <div class="text-sm text-slate-500 mt-1">
              Proteksi CSRF + CSP + origin allowlist untuk request mutasi, upload dibatasi, dan session disimpan di MySQL.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- sticky bottom CTA (mobile) -->
  <div class="fixed bottom-4 left-0 right-0 px-4 z-30 lg:hidden" data-aos="fade-up" data-aos-delay="150">
    <div class="glass rounded-2xl p-3 flex items-center justify-between gap-3">
      <div class="min-w-0">
        <div class="text-xs text-slate-500">Siap topup?</div>
        <div class="font-black truncate">Mulai checkout sekarang</div>
      </div>
      <a href="/#/checkout" class="btn-primary shimmer" style="white-space:nowrap;">
        <i class="ri-flashlight-line"></i> Topup
      </a>
    </div>
  </div>
</section>

<section class="mt-10">
  <h2 class="text-xl md:text-2xl font-black" data-aos="fade-up">Kenapa pilih kami</h2>
  <p class="text-slate-600 mt-2" data-aos="fade-up" data-aos-delay="80">
    Fokus utama: pengalaman checkout cepat, monitoring realtime, dan proses yang rapi.
  </p>

  <div class="mt-4 grid sm:grid-cols-2 lg:grid-cols-4 gap-3">
    <div class="card" data-aos="fade-up" data-aos-delay="60">
      <i class="ri-lock-2-line text-2xl"></i>
      <div class="font-black mt-2">Aman</div>
      <div class="text-sm text-slate-500">Pembayaran resmi + hardening security.</div>
    </div>
    <div class="card" data-aos="fade-up" data-aos-delay="140">
      <i class="ri-timer-flash-line text-2xl"></i>
      <div class="font-black mt-2">Cepat</div>
      <div class="text-sm text-slate-500">Buat order dalam hitungan detik.</div>
    </div>
    <div class="card" data-aos="fade-up" data-aos-delay="220">
      <i class="ri-customer-service-2-line text-2xl"></i>
      <div class="font-black mt-2">Support</div>
      <div class="text-sm text-slate-500">Admin siap bantu jika ada kendala.</div>
    </div>
    <div class="card" data-aos="fade-up" data-aos-delay="300">
      <i class="ri-whatsapp-line text-2xl"></i>
      <div class="font-black mt-2">WhatsApp</div>
      <div class="text-sm text-slate-500">Notifikasi otomatis sesuai template.</div>
    </div>
  </div>
</section>

<section class="mt-10">
  <h2 class="text-xl md:text-2xl font-black" data-aos="fade-up">Cara Topup</h2>

  <div class="mt-4 grid md:grid-cols-3 gap-3">
    <div class="card" data-aos="fade-up" data-aos-delay="60">
      <div class="badge">1</div>
      <div class="font-black mt-2">Pilih Produk</div>
      <div class="text-sm text-slate-500">Pilih paket chip favoritmu.</div>
    </div>
    <div class="card" data-aos="fade-up" data-aos-delay="150">
      <div class="badge">2</div>
      <div class="font-black mt-2">Isi Data</div>
      <div class="text-sm text-slate-500">Masukkan Game ID & WhatsApp aktif.</div>
    </div>
    <div class="card" data-aos="fade-up" data-aos-delay="240">
      <div class="badge">3</div>
      <div class="font-black mt-2">Bayar</div>
      <div class="text-sm text-slate-500">Snap muncul, pembayaran selesai, status update otomatis.</div>
    </div>
  </div>
</section>

<section class="mt-10">
  <div class="glass rounded-3xl p-6 md:p-8" data-aos="zoom-in">
    <div class="grid md:grid-cols-2 gap-5 items-center">
      <div>
        <div class="chip"><i class="ri-flashlight-line"></i> Ready to go</div>
        <div class="mt-3 text-2xl md:text-3xl font-black leading-tight">
          Checkout lebih cepat, lebih rapi, lebih aman.
        </div>
        <div class="mt-2 text-slate-600">
          Kamu tinggal pilih produk, isi data, lalu bayar. Setelah itu sistem akan update status otomatis.
        </div>
        <div class="mt-5 flex gap-3 flex-wrap">
          <a href="/#/checkout" class="btn-primary shimmer">
            <i class="ri-shopping-cart-2-line"></i> Mulai Checkout
          </a>
          <a href="/#/products" class="btn-ghost">
            <i class="ri-store-2-line"></i> Lihat Produk
          </a>
        </div>
      </div>
      <div class="grid grid-cols-2 gap-3">
        <div class="card" data-aos="fade-left" data-aos-delay="60">
          <div class="font-black flex items-center gap-2"><i class="ri-shield-check-line"></i> Validasi</div>
          <div class="text-sm text-slate-500 mt-1">Game ID, WA, qty, dan harga diverifikasi.</div>
        </div>
        <div class="card" data-aos="fade-left" data-aos-delay="120">
          <div class="font-black flex items-center gap-2"><i class="ri-notification-3-line"></i> Notif</div>
          <div class="text-sm text-slate-500 mt-1">WA template saat bayar & selesai (opsional).</div>
        </div>
        <div class="card" data-aos="fade-left" data-aos-delay="180">
          <div class="font-black flex items-center gap-2"><i class="ri-pulse-line"></i> Polling</div>
          <div class="text-sm text-slate-500 mt-1">Order page cek status tiap beberapa detik.</div>
        </div>
        <div class="card" data-aos="fade-left" data-aos-delay="240">
          <div class="font-black flex items-center gap-2"><i class="ri-cpu-line"></i> Stabil</div>
          <div class="text-sm text-slate-500 mt-1">Siap deploy VPS, ringan, dan responsif.</div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="mt-10">
  <h2 class="text-xl md:text-2xl font-black" data-aos="fade-up">FAQ</h2>
  <p class="text-slate-600 mt-2" data-aos="fade-up" data-aos-delay="80">
    Pertanyaan yang paling sering ditanya.
  </p>

  <div class="mt-4 grid gap-3" id="faq">
    <button class="card text-left faq-item" data-aos="fade-up" data-aos-delay="60" type="button">
      <div class="flex items-center justify-between gap-3">
        <div class="font-black">Apakah aman?</div>
        <i class="ri-add-line text-xl"></i>
      </div>
      <div class="faq-body text-sm text-slate-500 mt-2 hidden">
        Ya. Pembayaran via gateway resmi + security hardening (CSP/CSRF/rate limit/origin allowlist).
      </div>
    </button>

    <button class="card text-left faq-item" data-aos="fade-up" data-aos-delay="140" type="button">
      <div class="flex items-center justify-between gap-3">
        <div class="font-black">Berapa lama diproses?</div>
        <i class="ri-add-line text-xl"></i>
      </div>
      <div class="faq-body text-sm text-slate-500 mt-2 hidden">
        Setelah status settlement/capture, order masuk antrian. Admin akan proses sesuai urutan.
      </div>
    </button>

    <button class="card text-left faq-item" data-aos="fade-up" data-aos-delay="220" type="button">
      <div class="flex items-center justify-between gap-3">
        <div class="font-black">Notifikasi WhatsApp gimana?</div>
        <i class="ri-add-line text-xl"></i>
      </div>
      <div class="faq-body text-sm text-slate-500 mt-2 hidden">
        Aktif jika admin enable + WhatsApp sudah pairing. Template bisa diubah dari admin panel.
      </div>
    </button>
  </div>

  <script>
    // FAQ accordion (safe inside partial)
    (function(){
      const $faq = $('#faq');
      if(!$faq.length) return;

      $faq.off('click.faq').on('click.faq', '.faq-item', function(){
        const $btn = $(this);
        const $body = $btn.find('.faq-body');
        const $icon = $btn.find('i.ri-add-line, i.ri-subtract-line');

        const isOpen = !$body.hasClass('hidden');

        // close all
        $faq.find('.faq-body').addClass('hidden');
        $faq.find('i.ri-subtract-line').removeClass('ri-subtract-line').addClass('ri-add-line');

        // open current if previously closed
        if(!isOpen){
          $body.removeClass('hidden');
          $btn.find('i.ri-add-line').removeClass('ri-add-line').addClass('ri-subtract-line');
        }
      });

      // "Lacak Order" button behavior (optional)
      $('#btnTrack').off('click.track').on('click.track', function(e){
        // if you later implement "last order" storage, handle here.
        // for now, just go checkout (best UX)
        e.preventDefault();
        window.location.hash = '#/checkout';
      });
    })();
  </script>
</section>
